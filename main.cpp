///////////// includes /////////////////////
#include "mbed.h"
#include "platform/mbed_thread.h"
#include "Joystick.h"
#include "N5110.h"
#include "ShiftReg.h"  
#include "RunwayEngine.h"
#include "Utils.h"


///////////// defines /////////////////////
//#define PADDLE_WIDTH 2
//#define PADDLE_HEIGHT 8
//#define BALL_SIZE 2
//#define BALL_SPEED 3
///////////// objects ///////////////////
N5110 lcd(p14,p8,p9,p10,p11,p13,p21);
Joystick joystick(p20,p19);
DigitalIn buttonA(p29);
DigitalIn buttonB(p28);
DigitalIn buttonC(p27);
DigitalIn buttonD(p26);
BusOut leds(LED4,LED3,LED2,LED1);
ShiftReg seven_seg;
RunwayEngine Incredible;
AnalogIn pot(p17); 
///////////// prototypes ///////////////
void init();
void animation();//intro theme animation
void menu();
void render();
void go_back_to_main();
void display_lives(int lives);
void display_scores(int scores);
void game_over();
void success();
////////////////////////////////////////
//logo of The Incredibles
const int logo[44][62] =   {
        { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },
        { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },
        { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },
        { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },
        { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },
        { 0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,1,0,0,0,0,1,1,1,1,1,1,0,0,0,0,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0 },
        { 0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0 },
        { 0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0 },
        { 0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0 },
        { 0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,0,0,0,0,0 },
        { 0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,0,0,0,0 },
        { 0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,0,0,0 },
        { 0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,0,0 },
        { 0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,0 },
        { 0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1 },
        { 1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1 },
        { 1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1 },
        { 1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1 },
        { 1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1 },
        { 1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1 },
        { 1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1 },
        { 1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1 },
        { 1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1 },
        { 1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1 },
        { 1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1 },
        { 1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1 },
        { 1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1 },
        { 1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1 },
        { 1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1 },
        { 0,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0 },
        { 0,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0 },
        { 0,0,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0 },
        { 0,0,0,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0 },
        { 0,0,0,0,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0 },
        { 0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0 },
        { 0,0,0,0,0,0,0,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0 },
        { 0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0 },
        { 0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0 },
        { 0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0 },
        { 0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0 },
        { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0 },
        { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },
        { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },
        { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },
};

//script Incredible 
const int incredible[20][82] =   {
    { 1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,1,1,1,1,1,0,0,0 },
    { 1,1,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,1,1,0,0,0,1,1,1,1,1,1,0,0,0 },
    { 1,1,0,0,1,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,1,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0 },
    { 1,1,0,0,1,1,1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,1,1,1,1,1,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0 },
    { 1,1,0,0,1,1,1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,1,1,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,1,0,0,1,1,1,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0 },
    { 1,1,0,0,1,1,0,1,1,0,0,0,0,0,1,1,0,0,0,0,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,0,0,0,1,1,1,1,0,0,0,0,0,0,1,1,0,1,1,0,0,0,1,1,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0 },
    { 1,1,0,0,1,1,0,1,1,0,0,0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,0,1,1,0,0,0,1,1,1,1,0,0,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,0,0,0,0,1,1,0,1,1,0,0,0,1,1,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0 },
    { 1,1,0,0,1,1,0,0,1,1,0,0,0,0,1,1,0,0,1,1,1,0,0,0,0,0,0,1,1,0,0,1,1,1,1,1,0,0,1,1,0,0,0,0,0,0,0,1,1,0,1,1,1,1,1,0,0,1,1,0,1,1,1,1,1,1,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0 },
    { 1,1,0,0,1,1,0,0,1,1,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,0,1,1,1,0,0,1,1,0,1,1,1,1,1,1,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0 },
    { 1,1,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,1,1,0,1,1,1,1,0,0,0,0,1,1,0,0,0,1,1,1,1,1,1,1,0,0 },
    { 1,1,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,1,1,1,0,0,0,0,0,0,0,1,1,0,0,1,1,1,0,0,0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,1,1,0,1,1,1,1,0,0,0,0,1,1,0,0,0,1,1,1,1,1,1,1,0,0 },
    { 1,1,0,0,1,1,0,0,0,0,1,1,0,0,1,1,0,1,1,1,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,1,1,1,1,1,1,1,0,0,1,1,0,0,0,0,0,1,1,0,1,1,0,1,1,1,1,1,1,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0 },
    { 1,1,0,0,1,1,0,0,0,0,1,1,0,0,1,1,0,1,1,1,0,0,0,0,0,0,0,1,1,0,0,0,1,1,1,0,0,0,1,1,1,1,1,1,1,0,0,1,1,0,0,0,0,0,1,1,0,1,1,0,1,1,1,1,1,1,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0 },
    { 1,1,0,0,1,1,0,0,0,0,0,1,1,0,1,1,0,1,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,1,1,0,1,1,0,0,1,1,1,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0 },
    { 1,1,0,0,1,1,0,0,0,0,0,1,1,0,1,1,0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,1,1,0,1,1,0,0,1,1,1,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0 },
    { 1,1,0,0,1,1,0,0,0,0,0,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,1,1,1,0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,1,0,0,1,1,0,1,1,0,0,0,1,1,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0 },
    { 1,1,0,0,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,1,1,1,1,0,0,1,1,0,1,1,0,0,0,1,1,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0 },
    { 1,1,0,0,1,1,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,0,1,1,0,0,1,1,1,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0 },
    { 1,1,0,0,1,1,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,1,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,1,1,1,1,1,1,0,0,0,1,1,1,1,1,0,0,0,0,0,1,1,0,1,1,1,1,1,1,0,0,1,1,1,1,0,1,1,1,1,1,1,1,1,1 },
    { 1,1,0,0,1,1,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,1,0,1,1,0,0,0,0,0,1,1,0,0,1,1,1,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,1,1,0,1,1,1,1,1,0,0,0,1,1,1,1,0,1,1,1,1,1,1,1,1,1 },
};

const int adventure [20][82] =   {
    { 0,0,0,0,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,1,1,1,1,1,1,1,0,1,1,0,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,0,1,0,0,0,0,0,0,1,0,0,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1 },
    { 0,0,0,0,1,1,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1 },
    { 0,0,0,0,1,1,0,0,0,0,0,1,0,0,0,1,1,1,0,0,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,1,1,1,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,1,1,1,1,1,1,1,1,0,1,1,0,0,0,0,0 },
    { 0,0,0,0,1,1,0,0,0,0,0,1,0,0,0,0,0,1,1,0,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,1,0,0,0,1,1,1,1,0,1,1,0,0,0,0,0 },
    { 0,0,0,1,1,1,1,0,0,0,0,1,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,1,0,1,1,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,1,0,0,1,1,1,1,1,0,1,1,0,0,0,0,0 },
    { 0,0,0,1,1,1,1,0,0,0,0,1,0,0,0,0,0,0,1,1,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,1,0,0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,1,1,1,1,1,0,0,0,0,1,1,0,0,0,0,0 },
    { 0,0,1,1,0,0,1,1,0,0,0,1,0,0,0,0,0,0,1,1,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,1,0,0,1,1,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,1,1,1,1,1,0,0,0,0,1,1,0,0,0,0,0 },
    { 0,0,1,1,0,0,1,1,0,0,0,1,0,0,0,0,0,0,1,1,0,1,0,0,0,0,0,1,0,1,1,1,1,1,1,0,0,1,0,0,0,1,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,1,0,0,1,1,1,0,0,0,1,1,0,0,0,0,0 },
    { 0,1,1,1,0,0,1,1,1,0,0,1,0,0,0,0,0,0,1,1,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,1,0,0,0,1,1,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,1,0,0,1,1,1,0,0,0,1,1,0,0,0,0,0 },
    { 0,1,1,0,0,0,0,1,1,0,0,1,0,0,0,0,0,0,1,1,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,1,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0 },
    { 1,1,1,0,0,0,0,1,1,1,0,1,0,0,0,0,0,0,1,1,0,1,1,0,0,0,1,1,0,1,0,0,0,0,0,0,0,1,0,0,0,0,1,1,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,1,0,0,0,0,1,1,0,0,1,1,1,1,1,1,0 },
    { 1,1,1,1,1,1,1,1,1,1,0,1,0,0,0,0,0,0,1,1,0,1,1,0,0,0,1,1,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,1,0,0,0,0,1,1,0,0,1,1,1,1,1,1,0 },
    { 1,1,1,1,1,1,1,1,1,1,0,1,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,1,0,0,0,0,1,1,1,0,1,1,0,0,0,0,0 },
    { 1,1,0,0,0,0,0,0,1,1,0,1,0,0,0,0,0,1,1,0,0,0,1,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1,1,0,1,1,0,0,0,0,0 },
    { 1,1,0,0,0,0,0,0,1,1,0,1,0,0,0,1,1,1,0,0,0,0,1,1,1,1,1,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1,1,0,1,1,0,0,0,0,0 },
    { 1,0,0,0,0,0,0,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,1,0,0,1,0,0,0,0,0,1,1,0,1,1,0,0,0,0,0 },
    { 1,0,0,0,0,0,0,0,0,1,0,1,0,0,1,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,1,0,0,0,0,0,1,1,0,1,1,0,0,0,0,0 },
    { 1,0,0,0,0,0,0,0,0,1,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,0,1,1,0,0,0,0,0 },
    { 1,0,0,0,0,0,0,0,0,1,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0 },
    { 1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0 },    
};
////////////////////////////////////////
int main() {
    init();      // initialise devices
    animation(); // show the animation to start
    menu();
    
    

}

void init() {
    seven_seg.write(0x00);  // turn on 7-seg display
    lcd.init();
    lcd.setContrast(0.5);
    joystick.init();
    
}

void animation() {
        // display the logo first
        lcd.clear();
        lcd.drawObject(11,2,44,62,(int *)logo); // draw the logo
        lcd.refresh(); // refresh the LCD so the pixels appear
        ThisThread::sleep_for(50);
        // logo vanish
        int _x0=0;
        int _y0=0;
        for(int i=2; i<=44; i++){
            _y0=i;
            for (int j=11; j<=73; j+=4){
                _x0=j;
                lcd.setPixel(_x0,_y0,0);
                lcd.setPixel(_x0+1,_y0,0);
                lcd.setPixel(_x0+2,_y0,0);
                lcd.setPixel(_x0+3,_y0,0);
                lcd.setPixel(_x0+4,_y0,0);
                ThisThread::sleep_for(1);
                lcd.refresh();
            }
        }
        // display the name of the game
        for(int i=0; i<=84; i++){
            int _x1=i;
            lcd.drawObject(_x1-84,0,20,82,(int *)incredible);
            lcd.drawObject(84-_x1,21,20,82,(int *)adventure);
            lcd.refresh();
            ThisThread::sleep_for(1);
        }
        lcd.printString("    Press A   ",0,5);
        lcd.refresh();
        while (buttonA.read() == 0) {
            leds = 0b1111;
            thread_sleep_for(100);
            leds = 0b0000;
            thread_sleep_for(100);
        }
}

void menu() {
    lcd.clear();
    lcd.printString("    <MENU>    ",0,0);
    lcd.printString(" A>HOW TO PLAY",0,2);
    lcd.printString(" B>CHARACTERS ",0,3);
    lcd.printString(" C>CREDITS    ",0,4);
    lcd.printString(" D>PLAY NOW!  ",0,5);
    lcd.refresh();
    ThisThread::sleep_for(30);
    while(1) {
        // check if button A pressed
        if ( buttonA.read() == 1) {
            lcd.clear();
            lcd.printString("As a team of 2",0,0);
            lcd.printString(" You need to  ",0,1);
            lcd.printString("aviod asteroid",0,2);
            lcd.printString("collect  stars",0,3);
            lcd.printString("   Good luck  ",0,4);
            lcd.printString("    Press B   ",0,5);
            lcd.refresh();
        } else if (buttonB.read() == 1) { // check if B pressed
           lcd.clear();
            lcd.printString(" MrIncredible ",0,0);
    int _x = 30;
    int _y = 10;
    lcd.setPixel( _x+6, _y);
    lcd.setPixel( _x+7, _y);
    lcd.setPixel( _x+5, _y+1);
    lcd.setPixel( _x+6, _y+1);
    lcd.setPixel( _x+7, _y+1);
    lcd.setPixel( _x+8, _y+1);
    lcd.setPixel( _x+13, _y+1);
    lcd.setPixel( _x+14, _y+1);
    lcd.setPixel( _x+5, _y+2);
    lcd.setPixel( _x+6, _y+2);
    lcd.setPixel( _x+7, _y+2);
    lcd.setPixel( _x+8, _y+2);
    lcd.setPixel( _x+14, _y+2);
    lcd.setPixel( _x+5, _y+3);
    lcd.setPixel( _x+6, _y+3);
    lcd.setPixel( _x+7, _y+3);
    lcd.setPixel( _x+8, _y+3);
    lcd.setPixel( _x+9, _y+3);
    lcd.setPixel( _x+14, _y+3);
    lcd.setPixel( _x+15, _y+3);
    lcd.setPixel( _x+7, _y+4);
    lcd.setPixel( _x+8, _y+4);
    lcd.setPixel( _x+9, _y+4);
    lcd.setPixel( _x+10, _y+4);
    lcd.setPixel( _x+11, _y+4);
    lcd.setPixel( _x+14, _y+4);
    lcd.setPixel( _x+15, _y+4);
    lcd.setPixel( _x+16, _y+4);
    lcd.setPixel( _x+7, _y+4);
    lcd.setPixel( _x+8, _y+4);
    lcd.setPixel( _x+6, _y+5);
    lcd.setPixel( _x+7, _y+5);
    lcd.setPixel( _x+8, _y+5);
    lcd.setPixel( _x+9, _y+5);
    lcd.setPixel( _x+10, _y+5);
    lcd.setPixel( _x+11, _y+5);
    lcd.setPixel( _x+12, _y+5);
    lcd.setPixel( _x+13, _y+5);
    lcd.setPixel( _x+14, _y+5);
    lcd.setPixel( _x+15, _y+5);
    lcd.setPixel( _x+5, _y+6);
    lcd.setPixel( _x+6, _y+6);
    lcd.setPixel( _x+7, _y+6);
    lcd.setPixel( _x+8, _y+6);
    lcd.setPixel( _x+9, _y+6);
    lcd.setPixel( _x+10, _y+6);
    lcd.setPixel( _x+11, _y+6);
    lcd.setPixel( _x+12, _y+6);
    lcd.setPixel( _x+13, _y+6);
    lcd.setPixel( _x+14, _y+6);
    lcd.setPixel( _x+15, _y+6);
    lcd.setPixel( _x+1, _y+7);
    lcd.setPixel( _x+5, _y+7);
    lcd.setPixel( _x+6, _y+7);
    lcd.setPixel( _x+7, _y+7);
    lcd.setPixel( _x+8, _y+7);
    lcd.setPixel( _x+9, _y+7);
    lcd.setPixel( _x+10, _y+7);
    lcd.setPixel( _x+11, _y+7);
    lcd.setPixel( _x+12, _y+7);
    lcd.setPixel( _x+13, _y+7);
    lcd.setPixel( _x+14, _y+7);
    lcd.setPixel( _x+15, _y+7);
    lcd.setPixel( _x, _y+8);
    lcd.setPixel( _x+1, _y+8);
    lcd.setPixel( _x+5, _y+8);
    lcd.setPixel( _x+6, _y+8);
    lcd.setPixel( _x+7, _y+8);
    lcd.setPixel( _x+8, _y+8);
    lcd.setPixel( _x+9, _y+8);
    lcd.setPixel( _x+10, _y+8);
    lcd.setPixel( _x+11, _y+8);
    lcd.setPixel( _x+12, _y+8);
    lcd.setPixel( _x+13, _y+8);
    lcd.setPixel( _x+14, _y+8);
    lcd.setPixel( _x, _y+9);
    lcd.setPixel( _x+1, _y+9);
    lcd.setPixel( _x+2, _y+9);
    lcd.setPixel( _x+3, _y+9);
    lcd.setPixel( _x+4, _y+9);
    lcd.setPixel( _x+5, _y+9);
    lcd.setPixel( _x+6, _y+9);
    lcd.setPixel( _x+7, _y+9);
    lcd.setPixel( _x+8, _y+9);
    lcd.setPixel( _x+9, _y+9);
    lcd.setPixel( _x+10, _y+9);
    lcd.setPixel( _x+11, _y+9);
    lcd.setPixel( _x+12, _y+9);
    lcd.setPixel( _x+13, _y+9);
    lcd.setPixel( _x+14, _y+9);
    lcd.setPixel( _x+2, _y+10);
    lcd.setPixel( _x+3, _y+10);
    lcd.setPixel( _x+4, _y+10);
    lcd.setPixel( _x+5, _y+10);
    lcd.setPixel( _x+8, _y+10);
    lcd.setPixel( _x+9, _y+10);
    lcd.setPixel( _x+10, _y+10);
    lcd.setPixel( _x+11, _y+10);
    lcd.setPixel( _x+12, _y+10);
    lcd.setPixel( _x+13, _y+10);
    lcd.setPixel( _x+3, _y+11);
    lcd.setPixel( _x+4, _y+11);
    lcd.setPixel( _x+9, _y+11);
    lcd.setPixel( _x+10, _y+11);
    lcd.setPixel( _x+11, _y+11);
    lcd.setPixel( _x+12, _y+11);
    lcd.setPixel( _x+13, _y+11);
    lcd.setPixel( _x+8, _y+12);
    lcd.setPixel( _x+9, _y+12);
    lcd.setPixel( _x+10, _y+12);
    lcd.setPixel( _x+11, _y+12);
    lcd.setPixel( _x+12, _y+12);
    lcd.setPixel( _x+13, _y+12);
    lcd.setPixel( _x+14, _y+12);
    lcd.setPixel( _x+7, _y+13);
    lcd.setPixel( _x+8, _y+13);
    lcd.setPixel( _x+9, _y+13);
    lcd.setPixel( _x+10, _y+13);
    lcd.setPixel( _x+11, _y+13);
    lcd.setPixel( _x+12, _y+13);
    lcd.setPixel( _x+13, _y+13);
    lcd.setPixel( _x+14, _y+13);
    lcd.setPixel( _x+6, _y+14);
    lcd.setPixel( _x+7, _y+14);
    lcd.setPixel( _x+8, _y+14);
    lcd.setPixel( _x+9, _y+14);
    lcd.setPixel( _x+10, _y+14);
    lcd.setPixel( _x+11, _y+14);
    lcd.setPixel( _x+12, _y+14);
    lcd.setPixel( _x+13, _y+14);
    lcd.setPixel( _x+14, _y+14);
    lcd.setPixel( _x+7, _y+15);
    lcd.setPixel( _x+8, _y+15);
    lcd.setPixel( _x+12, _y+15);
    lcd.setPixel( _x+13, _y+15);
    lcd.setPixel( _x+14, _y+15);
    lcd.setPixel( _x+8, _y+16);
    lcd.setPixel( _x+13, _y+16);
    lcd.setPixel( _x+14, _y+16);
    lcd.setPixel( _x+14, _y+17);
    lcd.setPixel( _x+14, _y+18);
    lcd.setPixel( _x+14, _y+19);
    lcd.printString("   Player 1   ",0,4);
    lcd.refresh();
    ThisThread::sleep_for(30);
            lcd.clear();
            lcd.printString("  Jack Jack   ",0,0);
    int _x1 = 30;
    int _y1 = 10;
    lcd.setPixel( _x1+7, _y1);
    lcd.setPixel( _x1+6, _y1+1);
    lcd.setPixel( _x1+7, _y1+1);
    lcd.setPixel( _x1+8, _y1+1);
    lcd.setPixel( _x1+6, _y1+2);
    lcd.setPixel( _x1+7, _y1+2);
    lcd.setPixel( _x1+4, _y1+3);
    lcd.setPixel( _x1+5, _y1+3);
    lcd.setPixel( _x1+6, _y1+3);
    lcd.setPixel( _x1+7, _y1+3);
    lcd.setPixel( _x1+8, _y1+3);
    lcd.setPixel( _x1+9, _y1+3);
    lcd.setPixel( _x1+10, _y1+3);
    lcd.setPixel( _x1+2, _y1+4);
    lcd.setPixel( _x1+3, _y1+4);
    lcd.setPixel( _x1+4, _y1+4);
    lcd.setPixel( _x1+5, _y1+4);
    lcd.setPixel( _x1+6, _y1+4);
    lcd.setPixel( _x1+7, _y1+4);
    lcd.setPixel( _x1+8, _y1+4);
    lcd.setPixel( _x1+9, _y1+4);
    lcd.setPixel( _x1+10, _y1+4);
    lcd.setPixel( _x1+11, _y1+4);
    lcd.setPixel( _x1+12, _y1+4);
    lcd.setPixel( _x1+1, _y1+5);
    lcd.setPixel( _x1+2, _y1+5);
    lcd.setPixel( _x1+3, _y1+5);
    lcd.setPixel( _x1+4, _y1+5);
    lcd.setPixel( _x1+5, _y1+5);
    lcd.setPixel( _x1+6, _y1+5);
    lcd.setPixel( _x1+7, _y1+5);
    lcd.setPixel( _x1+8, _y1+5);
    lcd.setPixel( _x1+9, _y1+5);
    lcd.setPixel( _x1+10, _y1+5);
    lcd.setPixel( _x1+11, _y1+5);
    lcd.setPixel( _x1+12, _y1+5);
    lcd.setPixel( _x1+13, _y1+5);
    lcd.setPixel( _x1+1, _y1+6);
    lcd.setPixel( _x1+2, _y1+6);
    lcd.setPixel( _x1+3, _y1+6);
    lcd.setPixel( _x1+4, _y1+6);
    lcd.setPixel( _x1+5, _y1+6);
    lcd.setPixel( _x1+6, _y1+6);
    lcd.setPixel( _x1+7, _y1+6);
    lcd.setPixel( _x1+8, _y1+6);
    lcd.setPixel( _x1+9, _y1+6);
    lcd.setPixel( _x1+10, _y1+6);
    lcd.setPixel( _x1+11, _y1+6);
    lcd.setPixel( _x1+12, _y1+6);
    lcd.setPixel( _x1+13, _y1+6);
    lcd.setPixel( _x1+2, _y1+7);
    lcd.setPixel( _x1+3, _y1+7);
    lcd.setPixel( _x1+4, _y1+7);
    lcd.setPixel( _x1+5, _y1+7);
    lcd.setPixel( _x1+6, _y1+7);
    lcd.setPixel( _x1+7, _y1+7);
    lcd.setPixel( _x1+8, _y1+7);
    lcd.setPixel( _x1+9, _y1+7);
    lcd.setPixel( _x1+10, _y1+7);
    lcd.setPixel( _x1+11, _y1+7);
    lcd.setPixel( _x1+12, _y1+7);
    lcd.setPixel( _x1+4, _y1+8);
    lcd.setPixel( _x1+5, _y1+8);
    lcd.setPixel( _x1+6, _y1+8);
    lcd.setPixel( _x1+7, _y1+8);
    lcd.setPixel( _x1+8, _y1+8);
    lcd.setPixel( _x1+9, _y1+8);
    lcd.setPixel( _x1+10, _y1+8);
    lcd.setPixel( _x1+6, _y1+9);
    lcd.setPixel( _x1+7, _y1+9);
    lcd.setPixel( _x1+8, _y1+9);
    lcd.setPixel( _x1, _y1+10);
    lcd.setPixel( _x1+1, _y1+10);
    lcd.setPixel( _x1+2, _y1+10);
    lcd.setPixel( _x1+3, _y1+10);
    lcd.setPixel( _x1+4, _y1+10);
    lcd.setPixel( _x1+5, _y1+10);
    lcd.setPixel( _x1+6, _y1+10);
    lcd.setPixel( _x1+7, _y1+10);
    lcd.setPixel( _x1+8, _y1+10);
    lcd.setPixel( _x1+9, _y1+10);
    lcd.setPixel( _x1+10, _y1+10);
    lcd.setPixel( _x1+11, _y1+10);
    lcd.setPixel( _x1+12, _y1+10);
    lcd.setPixel( _x1+13, _y1+10);
    lcd.setPixel( _x1+14, _y1+10);
    lcd.setPixel( _x1+4, _y1+11);
    lcd.setPixel( _x1+5, _y1+11);
    lcd.setPixel( _x1+6, _y1+11);
    lcd.setPixel( _x1+7, _y1+11);
    lcd.setPixel( _x1+8, _y1+11);
    lcd.setPixel( _x1+9, _y1+11);
    lcd.setPixel( _x1+10, _y1+11);
    lcd.setPixel( _x1+5, _y1+12);
    lcd.setPixel( _x1+6, _y1+12);
    lcd.setPixel( _x1+7, _y1+12);
    lcd.setPixel( _x1+8, _y1+12);
    lcd.setPixel( _x1+9, _y1+12);
    lcd.setPixel( _x1+3, _y1+13);
    lcd.setPixel( _x1+4, _y1+13);
    lcd.setPixel( _x1+5, _y1+13);
    lcd.setPixel( _x1+6, _y1+13);
    lcd.setPixel( _x1+7, _y1+13);
    lcd.setPixel( _x1+8, _y1+13);
    lcd.setPixel( _x1+9, _y1+13);
    lcd.setPixel( _x1+10, _y1+13);
    lcd.setPixel( _x1+11, _y1+13);
    lcd.setPixel( _x1+1, _y1+14);
    lcd.setPixel( _x1+3, _y1+14);
    lcd.setPixel( _x1+4, _y1+14);
    lcd.setPixel( _x1+5, _y1+14);
    lcd.setPixel( _x1+6, _y1+14);
    lcd.setPixel( _x1+7, _y1+14);
    lcd.setPixel( _x1+8, _y1+14);
    lcd.setPixel( _x1+9, _y1+14);
    lcd.setPixel( _x1+10, _y1+14);
    lcd.setPixel( _x1+11, _y1+14);
    lcd.setPixel( _x1+13, _y1+14);
    lcd.setPixel( _x1+2, _y1+15);
    lcd.setPixel( _x1+3, _y1+15);
    lcd.setPixel( _x1+4, _y1+15);
    lcd.setPixel( _x1+5, _y1+15);
    lcd.setPixel( _x1+6, _y1+15);
    lcd.setPixel( _x1+9, _y1+15);
    lcd.setPixel( _x1+10, _y1+15);
    lcd.setPixel( _x1+11, _y1+15);
    lcd.setPixel( _x1+12, _y1+15);
    lcd.setPixel( _x1+3, _y1+16);
    lcd.setPixel( _x1+11, _y1+16);
    lcd.printString("   Player 2   ",0,4);
    lcd.printString("    Press D   ",0,5);
    lcd.refresh();
        } else if ( buttonC.read() == 1) { // check if C pressed
            lcd.clear();
            lcd.printString("This game is a",0,0);
            lcd.printString("   XJEL 2646  ",0,1);
            lcd.printString("    Project   ",0,2);
            lcd.printString("  Created by  ",0,3);
            lcd.printString("   Yusen Liu  ",0,4);
            lcd.printString("    Press D   ",0,5);
            lcd.refresh();
        } else if ( buttonD.read() == 1){ // enter the game
            Incredible.init();
            
            render();    // first draw the initial frame 
            int fps = 40;
            thread_sleep_for(1000/fps);  // and wait for one frame period - millseconds
            
            
            int lives = 4;   // display lives on LEDs
            display_lives(lives);
            
            int scores = 0; // display scores on seven-segment display
            display_scores(scores);
    
            while (lives > 0 && scores < 10) {  // keep looping while lives remain
                // read the joystick input and store in a struct
                UserInput input = {joystick.get_direction(),joystick.get_mag()};
                lives = Incredible.update(input, buttonA, buttonB, buttonC, buttonD).lives ;   // update the game engine based on input
                scores = Incredible.update(input, buttonA, buttonB, buttonC, buttonD).scores ;
                display_lives(lives);         // display lives on LEDs 
                display_scores(scores);   
                render();                     // draw frame on screen
                thread_sleep_for(1000/fps);         // and wait for one frame period - ms
            }
            if (lives <= 0) {
                game_over();
            } else if (scores > 9){
                success();
            }       
        } else {
            // if no buttons pressed, flashing LEDs
            leds = 0b0000;
            thread_sleep_for(50);
            leds = 0b0001;
            thread_sleep_for(50);
            leds = 0b0011;
            thread_sleep_for(50);
            leds = 0b0111;
            thread_sleep_for(50); 
            leds = 0b1111;
            thread_sleep_for(50);
        }
    }
}
void render(){
    lcd.clear();  
    Incredible.draw(lcd);
    lcd.refresh();
}

void display_lives(int lives) {
    if (lives == 4) {
        leds = 0b1111;
    } else if (lives == 3) {
        leds = 0b1110;
    } else if (lives == 2) {
        leds = 0b1100;
    } else if (lives == 1) {
        leds = 0b1000;
    } else {
        leds = 0b0000;
    }
}

void display_scores(int scores) {
    if (scores == 0) {
        seven_seg.write(0x3F);
    } else if (scores == 3) {
        seven_seg.write(0x4F);
    } else if (scores == 2) {
        seven_seg.write(0x5B);
    } else if (scores == 1) {
        seven_seg.write(0x06);
    } else if (scores == 4) {
        seven_seg.write(0x66);
    } else if (scores == 5) {
        seven_seg.write(0x6D);
    } else if (scores == 6) {
        seven_seg.write(0x7D);
    } else if (scores == 7) {
        seven_seg.write(0x07);
    } else if (scores == 8) {
        seven_seg.write(0x7F);
    } else if (scores == 9) {
        seven_seg.write(0x6F);
    }
}

void game_over() { // splash screen 
    while (1) {
        lcd.clear();
        lcd.printString("  Game Over ",0,2);  
        lcd.printString("    Loser!  ",0,4);
        lcd.refresh();
        leds = 0b1111;
        thread_sleep_for(250);
        lcd.clear();
        lcd.refresh();
        leds = 0b0000;
        thread_sleep_for(250);   
    }
}

void success() { // splash screen 
    while (1) {
        lcd.clear();
        lcd.printString("  Congrates ",0,2);  
        lcd.printString("  You Win ! ",0,4);
        lcd.refresh();
        leds = 0b1111;
        thread_sleep_for(250);
        lcd.clear();
        lcd.refresh();
        leds = 0b0000;
        thread_sleep_for(250);   
    }
}


void go_back_to_main () {
    menu();
}